<!doctype html><html class="u-height-80-percent no-js" lang="en" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><title>The need for speed - Part 1 - Kelstra Technologies</title><meta name="description" content="Speed up your website by enabling server side compression."><meta name="viewport" content="width=device-width,initial-scale=1"><meta property="og:locale" content="en_GB"><meta property="og:site_name" content="Kelstra Technologies"><meta property="og:title" content="The need for speed - Part 1"><link rel="canonical" href="https://www.kelstra.com/blog/the-need-for-speed/"><meta property="og:url" content="https://www.kelstra.com/blog/the-need-for-speed/"><meta property="og:description" content="Speed up your website by enabling server side compression."><meta name="twitter:site" content="@KelstraTech"><meta name="twitter:title" content="The need for speed - Part 1"><meta name="twitter:description" content="Speed up your website by enabling server side compression."><meta name="twitter:url" content="https://www.kelstra.com/blog/the-need-for-speed/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://www.kelstra.com/blog/images/the-need-for-speed/teaser.8957b9553ed8aa44.jpg"><meta name="twitter:creator" content="@KelstraTech"><meta property="article:publisher" content="https://www.facebook.com/Kelstra-Technologies-872038702897666/"><meta property="og:image" content="https://www.kelstra.com/blog/images/the-need-for-speed/teaser.8957b9553ed8aa44.jpg"><meta property="og:image:width" content="600"><meta property="og:image:height" content="315"><meta property="og:type" content="article"><meta property="article:published_time" content="2016-09-05T00:00:00+03:00"><!--[if lt IE 9]><link rel="stylesheet" href="/blog/assets/css/blog-old-ie.min.73a5b28fae75cba1.css" media="screen"><script>window.html5 = {'shivCSS': false, 'shivMethods': false};</script><script src="/assets/js/vendor/html5shiv/html5shiv.min.40bd440d29b3a937.js"></script><![endif]--><!--[if gt IE 8]><!--><link rel="stylesheet" href="/blog/assets/css/blog.min.3d0ad28b6fe8f86a.css" media="screen"><!--<![endif]--><link rel="manifest" href="/site.webmanifest"><link rel="apple-touch-icon" href="/assets/images/favicons/apple-touch-icon.png"><meta name="theme-color" content="#ffffff"></head><body class="u-height-full u-pad-top-0"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NBW6FZ" height="0" width="0" class="u-hide"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NBW6FZ');</script><!--[if lt IE 9]><div class="outdated-browser"><p>Your web browser is <strong>outdated</strong>. As a result, this website may not display or function correctly. Please <a href="http://outdatedbrowser.com/en">upgrade your browser</a> to improve your experience.</p></div><![endif]--><header role="banner"><div id="top"><div id="main-nav" class="nav nav--main u-cf"><a href="/" class="site-logo">Kelstra<span> Technologies</span></a> <a id="fallback-nav-open-btn" class="nav__btn nav__btn--open-fallback" href="#fallback-nav">Skip to fallback navigation</a> <a id="nav-open-btn" class="nav__btn nav__btn--open" href="#nav">Site navigation</a><nav role="navigation"><div id="nav"><a id="nav-close-btn" class="nav__btn nav__btn--close" href="#top">Return to content</a><ul class="nav__list nav--main__list"><li><a href="/">Home</a></li><li><a href="/#about">About</a></li><li><a href="/#work">Work</a></li><li><a href="/blog/" class="is-highlighted">Blog</a></li><li><a href="/contact.html">Contact</a></li></ul></div></nav></div></div></header><div class="page__hero"><img src="/blog/images/the-need-for-speed/header.9f9798f204df7371.jpg" alt="The need for speed - Part 1" class="page__hero-image"></div><div class="o-container o-container--1366-no-pad"><main role="main"><div class="sidebar"><div class="sidebar__wrapper"><div itemscope itemtype="http://schema.org/Person"><div class="author__content"><h3 class="author__name">George Okello</h3><p class="author__bio">Web Developer</p></div><div class="author__urls-wrapper"><ul class="author__urls social-icons"><li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Nairobi, Kenya</li><li><a href="https://www.kelstra.com/"><i class="fa fa-fw fa-chain" aria-hidden="true"></i> Website</a></li><li><a href="https://www.kelstra.com/contact.html"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li><li><a href="https://twitter.com/KelstraTech"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li></ul></div></div></div></div><div class="page__article"><article itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="headline" content="The need for speed - Part 1"><meta itemprop="description" content="Speed up your website by enabling server side compression."><meta itemprop="datePublished" content="September 05, 2016"><header><h1 class="page__title" itemprop="headline">The need for speed - Part 1</h1><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 4 minute read</p></header><section itemprop="text"><div class="page__content"><p>Websites are increasing in size, with each passing day. The average web page <a href="http://www.httparchive.org/interesting.php?a=All&amp;l=Apr%201%202016">weighs in at a hefty 2.3 megabytes</a>.</p><p>Large pages are detrimental for a number of reasons:</p><ul><li>They take longer to load. If it takes too long, users may abandon the page and go elsewhere.</li><li>They cost more, for users on a metered mobile data plan.</li><li>They may be downgraded to a lower position in the search rankings, by search engines.</li></ul><p>Now that we’ve seen the consequences of a large page, we can look at ways to trim the fat.</p><p>But first, the obligatory ‘before’ picture:</p><div><a href="/blog/images/the-need-for-speed/01-no-compression.29858f25369b5def.jpg" class="js-lightbox"><figure><img src="/blog/images/the-need-for-speed/01-no-compression-s.2a3a424fb2b785f2.jpg"><figcaption>Figure 1: An unoptimised web page.<span class="lightbox__enlarge-msg"> ( Click to enlarge )</span></figcaption></figure></a></div><p>The Google Chrome browser ships with developer tools. These tools display all sorts of useful data, as can be seen in <em>Figure 1</em>.</p><p>Since this is an offline test, the network bandwidth has been throttled to <em>Regular 3G</em>. This simulates a typical 3G online connection.</p><p>The web page is 173KB in size, the HTML document is loaded and parsed after 1.19 seconds, and the page is fully loaded after 2.44 seconds.</p><p>The browser requests eleven files from the server. Each request adds some latency, as the request has to travel all the way from the client to the web server. The requested file then travels all the way back.</p><p>The number of requests could be reduced to eight by combining the four JavaScript files into one file. I shall expound upon that particular optimisation in a subsequent article.</p><p>The first seven files are good candidates for compression. This is because they are all text files, which typically contain a significant amount of repetitive data.</p><p>The last four files are poor candidates for compression. They are binary files which have already been compressed by the image / font manipulation programs that created them.</p><p>The rest of this article describes procedures that are specific to the Apache web server. Equivalent procedures for other web servers are beyond the scope of this article.</p><p>In order to enable compression on the web server, an htaccess file is placed in the document root directory on the web server. The talented people over at <a href="https://html5boilerplate.com/">HTML5 Boilerplate</a> maintain such a file. I am a firm believer in not reinventing the wheel, and so I have adopted code from their file.</p><p>The complete htaccess file comprises code from multiple files. However, we start with an empty htaccess file and introduce code in stages. This allows us to test each snippet of code in isolation.</p><p><em>Figure 2</em> shows a few lines from the file, <em>compression.conf</em>. The remaining lines have been omitted for brevity. The full listing may viewed <a href="https://github.com/h5bp/server-configs-apache/blob/master/src/web_performance/compression.conf">here</a>.</p><div class="highlighter-rouge"><pre class="highlight"><code>
    &lt;IfModule mod_setenvif.c&gt;
        &lt;IfModule mod_headers.c&gt;
            SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
            RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
        &lt;/IfModule&gt;
    &lt;/IfModule&gt;

</code></pre></div><div class="caption">Figure 2: compression.conf</div><p>The htaccess file, containing just the contents of <em>compression.conf</em>, may be downloaded <a href="/blog/downloads/the-need-for-speed/htaccess.zip">here</a>. Unzip <em>htaccess.zip</em> to extract.</p><p>The htaccess file is then uploaded to the document root directory on the web server. This directory is usually named <em>public_html</em>. It may also be named <em>www</em> or <em>httpdocs</em>. <em>Figure 3</em> shows the local copy of the file on the left, and the uploaded remote copy on the right.</p><div><figure><img src="/blog/images/the-need-for-speed/03-remote-server.1928304df29695ae.jpg"><figcaption>Figure 3: An uploaded htaccess file.</figcaption></figure></div><p>The test is run again. Let’s see what a difference enabling gzip compression can make.</p><p>The ‘after’ picture:</p><div><a href="/blog/images/the-need-for-speed/04-gzip-compression.0f7398d22a165bc6.jpg" class="js-lightbox"><figure><img src="/blog/images/the-need-for-speed/04-gzip-compression-s.b6b5375483ca7c8e.jpg"><figcaption>Figure 4: gzip compression is enabled.<span class="lightbox__enlarge-msg"> ( Click to enlarge )</span></figcaption></figure></a></div><table><thead><tr><th></th><th>Uncompressed</th><th>Compressed</th><th>Reduction</th></tr></thead><tbody><tr><td>kelstra.shtml</td><td>5.6KB</td><td>2.0KB</td><td>64.29%</td></tr><tr><td>site.css</td><td>43.4KB</td><td>8.1KB</td><td>81.34%</td></tr><tr><td>fontfaceobserver.min.js</td><td>5.7KB</td><td>2.4KB</td><td>57.89%</td></tr><tr><td>modernizr.js</td><td>9.1KB</td><td>3.7KB</td><td>59.34%</td></tr><tr><td>main.js</td><td>4.7KB</td><td>1.7KB</td><td>63.83%</td></tr><tr><td>debug.js</td><td>1.6KB</td><td>0.88KB</td><td>45.00%</td></tr><tr><td>site-logo.svg</td><td>1.7KB</td><td>0.98KB</td><td>42.35%</td></tr><tr><td><strong>Web page</strong></td><td>173KB</td><td>121KB</td><td><strong>30.06%</strong></td></tr></tbody></table><div class="caption">Figure 5: File size comparison</div><table><thead><tr><th></th><th>Uncompressed</th><th>Compressed</th><th>Reduction</th></tr></thead><tbody><tr><td><strong>Web page</strong></td><td>2.44s</td><td>1.75s</td><td><strong>28.28%</strong></td></tr></tbody></table><div class="caption">Figure 6: Load time comparison</div><p>The web page is now 30.06% smaller, and loads 28.28% more quickly. A significant improvement!</p></div></section><footer class="page__meta"><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-09-05T00:00:00+03:00">September 05, 2016</time></p></footer><div class="page__hire"><a href="/contact.html" class="page__hire-button">Enjoyed this article? Hire me!</a></div><section class="page__share"><h4 class="page__share-title">Share on</h4><a href="https://twitter.com/intent/tweet?text=https://www.kelstra.com/blog/the-need-for-speed/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span>Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.kelstra.com/blog/the-need-for-speed/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span>Facebook</span></a> <a href="https://plus.google.com/share?url=https://www.kelstra.com/blog/the-need-for-speed/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span>Google+</span></a> <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.kelstra.com/blog/the-need-for-speed/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span>LinkedIn</span></a></section><nav class="pagination"><a href="#" class="pagination--pager disabled">Previous</a> <a href="https://www.kelstra.com/blog/the-need-for-speed-2/" class="pagination--pager" title="The need for speed - Part 2
">Next</a></nav></article><div class="page__related"><h4 class="page__related-title">You May Also Enjoy</h4><div class="grid__wrapper"><div class="grid__item"><article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork"><div class="archive__item-teaser"><img src="/blog/images/the-need-for-speed/teaser.8957b9553ed8aa44.jpg" alt=""></div><h2 class="archive__item-title" itemprop="headline"><a href="https://www.kelstra.com/blog/the-need-for-speed-2/" rel="permalink">The need for speed - Part 2</a></h2><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 3 minute read</p><p class="archive__item-excerpt" itemprop="description">Shrink your web page by minifying its files.</p></article></div></div></div></div></main></div><div class="page__footer"><div class="o-container o-container--1366-no-pad"><footer><div class="page__footer-follow"><ul class="social-icons"><li><strong>Follow:</strong></li><li><a href="https://twitter.com/KelstraTech"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li></ul></div><div class="page__footer-credits"><a href="/blog/credits">Credits</a></div><div class="page__footer-copyright">Copyright &copy; 2021 Kelstra Technologies.</div></footer></div></div><script src="/blog/assets/js/blog.min.a86612965f70e368.js" defer="defer"></script><!--[if lt IE 9]><script src="/blog/assets/js/blog-old-ie.min.7721d9002ea1e560.js"></script><![endif]--></body></html>